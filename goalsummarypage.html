<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/subgoalsstyle.css">
    <link rel="stylesheet" href="css/navigationAndBackground.css">
    <script src="https://www.gstatic.com/firebasejs/7.3.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-firestore.js"></script>
    <script src="scripts/app.js"> var db=firebase.firestore();</script>
    <script src="scripts/loginverification.js"></script>
</head>
<body>
    <nav class=navbar navbar-expand navbar-dark flex-column flex-md-row bd-navbar style="background-color: #63E2E2; height:7.12%">
        <a class="nav-item nav-link active" id="home" href="main.html">Home</a>
        <a class="nav-item nav-link" id=journals href="journals.html">Journals</a>
        <a class="nav-item nav-link" id="goals" href="goals.html">Goals</a>
        <a class="nav-item nav-link" id="logoutbutton" href="index.html">Log Out</a>
    </nav>
    
    <div class="container">
      <a href="main.html"><button id="backbutton">Back</button></a>
    </div>

<script>
    var query = decodeURI(window.location.search);
    var queries = query.split("?");
    var goalID = queries[1];
    let ul = document.createElement("ul")
    ul.className="list-group list-group-flush";
    function createListElements(doc) {

        //create bootstrap list element
        let li = document.createElement("li");
        li.className="list-group-item";

        //create bootstrap div element and append it to list
        let div = document.createElement("div");
        div.className ="custom-control custom-checkbox";
        li.appendChild(div)

        //create bootstrap input and label elements and append to div
        let input = document.createElement("input");
        input.type="checkbox";
        input.className="custom-control-input";
        input.id = doc.data().name;
        let label = document.createElement("label");
        label.className="custom-control-label";
        label.for=input.id;
        label.innerHTML= doc.data().name;
        div.appendChild(input)
        div.appendChild(label)
    }




    document.body.appendChild(ul)
    db.collection("Users").doc(user).collection("Goals").doc(goalID).collection("Subgoals").get().
    then(function (querySnapshot){
        querySnapshot.forEach(function(doc) {
            if (doc.data().name !== "") {
                createListElements(doc)
            }
        })
    })

</script>
</body>
</html>